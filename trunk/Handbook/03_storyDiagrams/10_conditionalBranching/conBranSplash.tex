\newpage
\hypertarget{sec:conBran}{}
\section{Conditional Branching}
\genHeader

When working with SDMs, you'll often find yourself needing to decide which statement(s) to execute based on the return value of an arbitrary (black box)
operation, as we just saw in \texttt{check}. In our example so far, we have implemented these constructs via SDM \emph{pattern matching}. 

With eMoflon however, there is an alternate way to construct these black boxes. In fact, this feature is yet another way of integrating handwritten java code
with your SDM! The only ``rule'' of this feature is that your method must return \texttt{EBoolean}, \texttt{Success}, or \texttt{Failure}, respectively
corresponding to \texttt{true} and \texttt{false}. Any other values will set \texttt{Failure} to \texttt{null}. It follows that void methods cannot be used for
branching - an exception will be thrown during execution.

Let's reconsider \texttt{grow}, the method that adds a new partition to our box. Reviewing Fig.~\ref{fig:growComplete}, the current pattern assumes
there are already at least two partitions in \texttt{box}. What would happen if it had only one, or no partitions at all? The metamodel simply wouldn't
work -- the pattern would \emph{never} find a match. To correct this problem, lets modify \texttt{grow} so that if the match returns \texttt{false}, we
initalize two new partitions (a first and last), but \emph{only} if the partition is completely empty. In other words, if a \texttt{Box} has only one partition,
it will fail the first match, and will fail the new creation and return \texttt{false}, never growing the box.

% Special init instructions for both vis and header, but then it goes back to gen instructions

\fancyfoot[R]{ $\triangleright$ \hyperlink{conBran vis}{Next [visual]\hspace{0.2cm} } \\ $\triangleright$ \hyperlink{conBran tex}{Next [textual]} } 

\input{../10_conditionalBranching/visConBran}

\input{../10_conditionalBranching/texConBran}

\newpage
\genHeader
\hypertarget{return conBran}{}

\begin{itemize}

\item[$\blacktriangleright$] Edit the declaration until it looks like Fig.~\ref{code:initBox}

\begin{figure}[htbp]
\begin{center}
  \includegraphics[width=0.8\textwidth]{eclipse_initBoxCode}
  \caption{{\bf check meeee!}}  
  \label{code:initBox} 
\end{center}
\end{figure}
\FloatBarrier

\end{itemize}
